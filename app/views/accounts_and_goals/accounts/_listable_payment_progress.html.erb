<%# locals: (progress:, dasharray: 300, fill_stroke_width: 6, base_stroke_width: 2) %>

<div class="my-auto flex justify-center items-center w-12 h-12 relative">
  <span class="absolute bottom-0 top-0 right-0 left-0 flex justify-center items-center">
    <svg
      class="rotate-[270deg]"
      viewBox="0 0 100 100"
      width="100%"
      height="100%"
      stroke="currentColor"
      fill="none"
      stroke-width="<%= base_stroke_width %>"
    >
      <circle cx="50" cy="50" r="45"></circle>
    </svg>
  </span>
  <% if progress < 1.0 %>
    <span class="absolute bottom-0 top-0 right-0 left-0 flex justify-center items-center">
      <svg
        class="rotate-[270deg]"
        viewBox="0 0 100 100"
        width="100%"
        height="100%"
        stroke="currentColor"
        fill="none"
        stroke-width="<%= fill_stroke_width %>"
      >
        <circle
          cx="50"
          cy="50"
          r="45"
          stroke-dashoffset="<%= dasharray - (progress * dasharray).floor.to_i %>"
          stroke-dasharray="<%= dasharray %>"
        ></circle>
      </svg>
    </span>
    <div class="absolute bottom-0 top-0 right-0 left-0 flex justify-center items-center">
      <p class="leading-none text-xl">
        <%= number_with_precision((progress * 100).abs, precision: 2, significant: true) %>
      </p>
    </div>
  <% else %>
    <span class="absolute bottom-0 top-0 right-0 left-0 flex justify-center items-center">
      <svg
        fill="none"
        height="24"
        width="24"
        stroke="currentColor"
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="<%= fill_stroke_width %>"
        viewBox="60 60 60 60"
      >
        <polyline points="65 90 85 110 115 70"></polyline>
      </svg>
    </span>
  <% end %>
</div>