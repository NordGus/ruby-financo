<%= form_for [:accounts_and_goals, account],
             html: {
               class: modal_parent_element_classes,
               data: { controller: "deletable" }
             } do |form| %>
  <%= form.hidden_field :kind %>

  <div class="flex justify-between divide-x items-stretch h-14 border-b">
    <span class="px-4 flex justify-center items-center">
        <%= t("accounts_and_goals.ui.accounts.kind.#{form.object.kind}") %>
      </span>
    <div class="flex-grow content-['']"></div>
    <%=
      form.submit nil,
                  class: "px-4 cursor-pointer bg-green-500 text-neutral-50 hover:bg-green-400 flex justify-center items-center"
    %>
    <%=
      link_to t("ui.buttons.close"),
              accounts_and_goals_path,
              class: "px-4 cursor-pointer hover:bg-neutral-100 flex justify-center items-center"
    %>
  </div>

  <div class="divide-y overflow-y-auto">
    <% if flash[:notice].present? %>
      <%= render "components/forms/messages/big", message: flash[:notice], type: :success %>
    <% end %>

    <% flash[:form_persistence_warnings]&.each do |warning| %>
      <%= render "components/forms/messages/big", message: warning, type: :warning %>
    <% end %>

    <% account.errors.messages_for(:form_persistence_warnings).each do |warning| %>
      <%= render "components/forms/messages/big", message: warning, type: :warning %>
    <% end %>

    <% account.errors.messages_for(:form_persistence_errors).each do |error| %>
      <%= render "components/forms/messages/big", message: error, type: :error %>
    <% end %>

    <%=
      render "components/forms/inputs/text",
             form:,
             attr: :name,
             autofocus: true,
             error_messages: account.errors.messages_for(:name)
    %>
    <%=
      render "components/forms/inputs/text",
             form:,
             attr: :currency,
             error_messages: account.errors.messages_for(:currency)
    %>
    <%=
      render "components/forms/inputs/textarea",
             form:,
             attr: :description,
             placeholder: "add a simple description"
    %>
    <% if account.loan_account? %>
      <%= render "components/forms/separator" %>
      <%= render "components/forms/inputs/check_box", form:, attr: :personal_loan %>
    <% end %>
    <% if account.loan_account? || account.credit_line_account? %>
      <%= render "components/forms/separator" %>
      <%=
        render "components/forms/inputs/number",
               form:,
               attr: :capital,
               error_messages: account.errors.messages_for(:capital)
      %>
    <% end %>
    <% if account.loan_account? %>
      <%= render "components/forms/messages/small", message: "a negative value means you are owed" %>
    <% end %>
    <% unless account.external_account? %>
      <%= render "components/forms/separator" %>
      <%= render "accounts_and_goals/accounts/account/historic_fields", form:, account: %>
    <% end %>
    <% unless account.new_record? %>
      <%= render "components/forms/separator" %>
      <%= render "accounts_and_goals/accounts/account/archive_and_deletion", form:, account: %>
    <% end %>
  </div>
<% end %>
