<% content_for :content do %>
  <div class="p-2 h-[100%] grid gap-2 grid-cols-[minmax(0,_1fr)_minmax(0,_1fr)_30vw] grid-rows-[min-content_min-content_minmax(0,_1fr)_minmax(0,_1fr)]">
    <%= render "components/card", additional_classes: "col-span-2 px-3 py-1.5 flex justify-between items-baseline" do %>
      <h1 class="text-3xl">accounts & goals</h1>
    <% end %>
    <%= render "components/card", additional_classes: "row-span-4" do %>
      <%= content_for?(:account) ? yield(:account) : yield %>
    <% end %>
    <div class="col-span-2 grid gap-2 grid-cols-3">
      <%=
        render "accounts_and_goals/balance_skeleton",
               id: :capital_summary,
               src: capital_accounts_and_goals_summary_index_path,
               name: "capital"
      %>
      <%=
        render "accounts_and_goals/balance_skeleton",
               id: :debts_summary,
               src: debt_accounts_and_goals_summary_index_path,
               name: "debt"
      %>
      <%=
        render "accounts_and_goals/balance_skeleton",
               id: :total_summary,
               src: total_accounts_and_goals_summary_index_path,
               name: "total"
      %>
    </div>
    <%= render "components/card", additional_classes: "flex flex-col" do %>
      <div class="flex justify-between items-baseline border-b">
        <h3 class="mx-3 text-lg">bank & savings accounts</h3>
        <span class="px-3 py-2 border-l">new</span>
      </div>
      <%= turbo_frame_tag :capital_accounts, class: "block flex-grow overflow-y-auto" do %>
        <div class="h-[100%] flex justify-center items-center">
          <%= render "components/spinner" %>
        </div>
      <% end %>
    <% end %>
    <%= render "components/card", additional_classes: "flex flex-col" do %>
      <div class="flex justify-between items-baseline border-b">
        <h3 class="mx-3 text-lg">loans & credit lines</h3>
        <span class="px-3 py-2 border-l">new</span>
      </div>
      <%= turbo_frame_tag :debt_accounts, class: "block flex-grow overflow-y-auto" do %>
        <div class="h-[100%] flex justify-center items-center">
          <%= render "components/spinner" %>
        </div>
      <% end %>
    <% end %>
    <%= render "components/card", additional_classes: "flex flex-col" do %>
      <div class="flex justify-between items-baseline border-b">
        <h3 class="mx-3 text-lg">income & expenses sources</h3>
        <span class="px-3 py-2 border-l">new</span>
      </div>
      <%= turbo_frame_tag :external_accounts, class: "block flex-grow overflow-y-auto" do %>
        <div class="h-[100%] flex justify-center items-center">
          <%= render "components/spinner" %>
        </div>
      <% end %>
    <% end %>
    <%= render "components/card", additional_classes: "flex flex-col" do %>
      <div class="flex justify-between items-baseline border-b">
        <h3 class="mx-3 text-lg">savings goals</h3>
        <span class="px-3 py-2 border-l">new</span>
      </div>
      <%= turbo_frame_tag :savings_goals, class: "block flex-grow overflow-y-auto" do %>
        <div class="h-[100%] flex justify-center items-center">
          <%= render "components/spinner" %>
        </div>
      <% end %>
    <% end %>
  </div>
<% end %>

<%= render template: "layouts/application" %>
